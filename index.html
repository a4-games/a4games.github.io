<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>a4Games</title>

    <style>
        :root {
            --bg: #f4f4f4;
            --text: #111;
            --card: #ffffff;
            --sidebar: #ffffff;
            --shadow: rgba(0,0,0,0.12);

            --bg-dark: #111;
            --text-dark: #eaeaea;
            --card-dark: #1c1c1c;
            --sidebar-dark: #1a1a1a;
            --shadow-dark: rgba(0,0,0,0.5);
        }

        body.dark {
            --bg: var(--bg-dark);
            --text: var(--text-dark);
            --card: var(--card-dark);
            --sidebar: var(--sidebar-dark);
            --shadow: var(--shadow-dark);
        }

        body {
            margin: 0;
            font-family:Arial, sans-serif;
            background:var(--bg);
            color:var(--text);
            transition: background 0.3s, color 0.3s;
            display:flex;
        }

        /* SIDEBAR */
        .sidebar {
            width:260px;
            height:100vh;
            background:var(--sidebar);
            box-shadow:0 0 20px var(--shadow);
            padding:20px;
            box-sizing:border-box;
            position:fixed;
            transition:background 0.3s;
            display:flex;
            flex-direction:column;
            align-items:center;
        }

        .logo {
            width:140px;
            margin-bottom:25px;
        }

        .sidebar button {
            width:100%;
            padding:12px;
            border:none;
            background:#ddd;
            border-radius:8px;
            font-size:1rem;
            cursor:pointer;
            margin-bottom:10px;
            transition:0.2s;
        }
        body.dark .sidebar button {
            background:#333;
            color:white;
        }
        .sidebar button:hover {
            opacity:0.8;
        }

        /* TOP BAR */
        .topbar {
            margin-left:260px;
            width:calc(100% - 260px);
            background:var(--sidebar);
            padding:15px 25px;
            box-shadow:0 2px 10px var(--shadow);
            display:flex;
            justify-content:space-between;
            align-items:center;
            position:sticky;
            top:0;
            transition:background 0.3s;
        }

        .search-bar {
            width:300px;
            padding:10px;
            border-radius:8px;
            border:none;
            font-size:1rem;
            background:var(--card);
            color:var(--text);
            box-shadow:0 0 10px var(--shadow);
        }

        .mode-toggle {
            font-size:1.5rem;
            cursor:pointer;
            padding:8px;
            border-radius:50%;
        }

        /* MAIN CONTENT */
        main {
            margin-left:260px;
            width:calc(100% - 260px);
            padding:25px;
        }

        .section-title {
            font-size:1.6rem;
            margin:10px 0 15px 0;
            font-weight:bold;
        }

        /* FEATURED */
        .featured-box {
            width:100%;
            height:180px;
            background:var(--card);
            box-shadow:0 0 20px var(--shadow);
            border-radius:14px;
            display:flex;
            align-items:center;
            justify-content:center;
            font-size:1.2rem;
            margin-bottom:35px;
        }

        /* GRID */
        .grid {
            display:grid;
            grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));
            gap:20px;
        }

        .game-box {
            background:var(--card);
            box-shadow:0 6px 18px var(--shadow);
            padding:20px;
            border-radius:16px;
            text-align:center;
            cursor:pointer;
            transition:transform 0.2s, box-shadow 0.2s;
            color:var(--text);
            text-decoration:none;
        }

        .game-box:hover {
            transform:scale(1.05);
        }

        .game-box img {
            width:140px;
            height:140px;
            object-fit:cover;
            border-radius:14px;
            margin-bottom:10px;
        }

        .game-title {
            font-size:1.1rem;
            font-weight:bold;
        }

        /* CLOAK MODAL */
        .cloak-modal {
            display:none;
            position:fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background:rgba(0,0,0,0.7);
            backdrop-filter:blur(4px);
            align-items:center;
            justify-content:center;
        }
        .cloak-content {
            background:var(--sidebar);
            padding:25px;
            width:350px;
            border-radius:12px;
            box-shadow:0 0 20px var(--shadow);
            color:var(--text);
        }
        .cloak-content input {
            width:100%;
            padding:10px;
            background:var(--card);
            border:none;
            border-radius:8px;
            margin-bottom:10px;
            color:var(--text);
            box-shadow:0 0 12px var(--shadow);
        }
        .preset-btn {
            padding:8px 12px;
            border:none;
            background:#777;
            color:white;
            border-radius:6px;
            cursor:pointer;
            margin-right:6px;
        }
        .cloak-actions {
            display:flex;
            justify-content:space-between;
            margin-top:15px;
        }
        .cloak-actions button {
            padding:10px 15px;
            border:none;
            border-radius:8px;
            background:#888;
            color:white;
            cursor:pointer;
        }
    </style>
</head>

<body>

    <!-- SIDEBAR -->
    <div class="sidebar">
        <img src="logo.png" class="logo" />
        <button id="cloakOpen">Cloak Page</button>
        <button onclick="window.scrollTo(0,0)">Top</button>
    </div>

    <!-- TOP BAR -->
    <div class="topbar">
        <input type="text" id="search" class="search-bar" placeholder="Search games...">
        <div class="mode-toggle" id="toggleMode">ðŸŒ™</div>
    </div>

    <!-- MAIN CONTENT -->
    <main>
        <div class="section-title">Featured Game</div>
        <div class="featured-box">Set featured game here</div>

        <div class="section-title">Library</div>
        <div class="grid" id="gameGrid">
            <!-- Games auto-filter with JS -->
            <a href="/deltarune" class="game-box"><img src="data:image/png;base64,iVBORw0KGgoAAA..." /><div class="game-title">DELTARUNE</div></a>
            <a href="/omori" class="game-box"><img src="https://pbs.twimg.com/media/Es6jE4hWMAIXxeA.jpg" /><div class="game-title">OMORI</div></a>
            <a href="/granny" class="game-box"><img src="https://play-lh.googleusercontent.com/yT_LBq_tyKeID..." /><div class="game-title">Granny</div></a>

            <!-- You can keep all your other games below, unchanged -->
        </div>
    </main>

    <!-- CLOAK MODAL -->
    <div id="cloakModal" class="cloak-modal">
        <div class="cloak-content">
            <h2 style="text-align:center;">Cloak Settings</h2>

            <label>Tab Title:</label>
            <input id="cloakTitle" type="text" placeholder="Google Docs">

            <label>Favicon URL:</label>
            <input id="cloakIcon" type="text" placeholder="https://example.com/icon.png">

            <h3>Presets</h3>
            <button class="preset-btn" data-title="Home | Schoology" data-icon="...">Schoology</button>
            <button class="preset-btn" data-title="Clever | Portal" data-icon="...">Clever</button>

            <div class="cloak-actions">
                <button id="cloakApply">Apply</button>
                <button id="cloakClose">Close</button>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        /* DARK/LIGHT MODE */
        const toggleMode = document.getElementById("toggleMode");
        toggleMode.onclick = () => {
            document.body.classList.toggle("dark");
            toggleMode.textContent = document.body.classList.contains("dark") ? "â˜€ï¸" : "ðŸŒ™";
        };

        /* SEARCH FILTER */
        const searchInput = document.getElementById("search");
        const gameGrid = document.getElementById("gameGrid");

        searchInput.addEventListener("input", () => {
            const term = searchInput.value.toLowerCase();
            const boxes = gameGrid.querySelectorAll(".game-box");

            boxes.forEach(box => {
                const title = box.querySelector(".game-title").textContent.toLowerCase();
                box.style.display = title.includes(term) ? "" : "none";
            });
        });

        /* CLOAK POPUP */
        const modal = document.getElementById("cloakModal");
        const openBtn = document.getElementById("cloakOpen");
        const closeBtn = document.getElementById("cloakClose");
        const applyBtn = document.getElementById("cloakApply");

        openBtn.onclick = () => modal.style.display = "flex";
        closeBtn.onclick = () => modal.style.display = "none";

        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.onclick = () => {
                document.getElementById('cloakTitle').value = btn.dataset.title;
                document.getElementById('cloakIcon').value = btn.dataset.icon;
            };
        });

        applyBtn.onclick = () => {
            let t = document.getElementById("cloakTitle").value;
            let i = document.getElementById("cloakIcon").value;

            if (t) document.title = t;

            if (i) {
                let favicon = document.querySelector("link[rel='icon']");
                if (!favicon) {
                    favicon = document.createElement("link");
                    favicon.rel = "icon";
                    document.head.appendChild(favicon);
                }
                favicon.href = i;
            }

            modal.style.display = "none";
        };
    </script>

</body>
</html>
